###  

### 34.运用Vue CLI 3快速创建项目.ts

vue  -V   查看vue-cli版本


```vue
step1:
vue create ant-design-vue-app

step2:
manually seletc features
	选择：
	babel
	router
	vuex
	css pre-processors
	linter/Formatter
	Unit

step3: 
	history
	less //antd 是用的less, 饿了么是用高度sass 
	ESlint with Prettier
	Lint on save & Lint and fix on commit   //lint 全选 
	Jest
	in dedecated config files   //In package.json

step4:
	安装 ant-design 和 时间库， moment
	npm i ant-design-vue  moment 
```

代码添加0.0.1 tag

git checkout 0.0.1



###  35-怎样自定义Webpack和Babel配置.mp4	

main.js 中怎么配置？

```js
// 全局引入
import Antd from 'ant-design-vue';  //引入antd
import 'ant-design-vue/dist/antd.less';  //引入antd样式

Vue.use(Antd);  //所有的组件全局注册
```

可以引入less 但是会报错，可以打开GitHub中找这个问题

1. 降低less 版本3.0以下
2. 开启javascript

自定义webpack配置，新建vue.config.js文件，添加配置

```js
module.exports = {
  css: {
    loaderOptions: {
      less: {
        modifyVars: {
          "primary-color": "#1DA57A"
        },
        javascriptEnabled: true
      }
    }
  }
  ...
}
```

第一种按需加载的方式：

单独引入组件，和组件样式文件

```js
import { Button } from 'ant-design-vue/lib/button '
import 'ant-design-vue/lib/button/style'
```

第二种按需加载，借助babel插件

安装插件

```js
npm  i --save-dev babel-plugin-import 
```

babel.config.js 

```js
module.exports = {
  presets: ["@vue/cli-plugin-babel/preset", "@vue/babel-preset-jsx"],
  plugins: [
    [
      "import",
      { libraryName: "ant-design-vue", libraryDirectory: "es", style: true }
    ] // `style: true` 会加载 less 文件
  ]
};

```

main.js中

```js
import { Button, Layout, Icon, Drawer} from 'ant-design-vue'
Vue.use(Button)
Vue.use(Layout)
Vue.use(Icon)
Vue.use(Drawer)
```

**<u>未按需加载，app.js 12.8M， 按需加载之后，app.js，3.9M</u>**



### 36-怎样设计一个高扩展性的路由.mp4

没看懂？

```js
component: {render: h => h(router-view) }
```



### 37-完成一个可动态改动的页面规划.mp4

layout 组件

导航模式，在左侧，在右侧

整体风格定制，黑色，白色



###  38-怎样将菜单和路由分离.mp4

siderMenu 如何和数据联系起来？



hideInMenu， 不显示该路由

name，才渲染到菜单上

meta

分别是干嘛的，为啥要通过name的有无去控制是否添加菜单？



getMenuData 如何根据路由信息，生成左侧菜单

这两个操作是一样的。

```js
let a = {name: 1, age: 2}
let b = {...a}
let c = Object.assign(a)

// 浅复制，之前的a 改变，bc 也会改变
let a = {person: {name: 2, age: 1, add: { pro: 'anhui'}}}
let b = {...a}
let c = Object.assign(a)
```

第一版的getMenuData 我怎么没看懂

```js
getMenuData(routes) {
      cons menuData = [];
      routes.forEach(item => {
        if(item.name && !item.hideInMenu) {
          const newItem = {...item};
          delete = newItem.children;
          if(item.collapsed && !item.hideChildrenInMenu) {
            newItem.children = this.getMenuData(item.children)
          }
          menuData.push(newItem)
        }else if(
          !item.hideInMenu &&
          !item.hideChildrenInMenu &&
          item.children
          ) {
            menuData.push(...this.getMenuData(item.children))
        }
      })
      return menuData
    }

```



### 39-怎样运用路由办理用户权限.mp4



两种方法，一种是通过在 router 中添加meta信息，authority，是一个数组，代表当前路径可见的角色有哪些



lodash， findeLast 方法

npprogress , 顶部进入页面的进度条







### 40-愈加精密化的权限设计（权限组件、权限指令）.mp4

权限控制

+ 组件式
+ 指令式



某个组件的权限控制, 通过函数式组件

原理：接受一个参数，通过内部函数，计算这个函数是否返回true，true 显示组件，否则显示空。



函数式组件需要将**functional**设为true，它没有状态，没有上下文

- 无状态 **==** 无响应式数据
- 无实例 **==** 无this上下文

函数式组件最大的用途就是用它做中间件来实现render方法，下面是一个例子



```js
render(h, context) {
  const { props, scopedSlots } = context;
  // 如果校验通过，返回插槽，传递过来的子组件，否则返回null
  return check(props.authority) ? scopedSlots.default() : null;
}

// 全局注册校验组件
Vue.component("Authorized", Authorized);


实话实说，不做成函数式组件也可以
<Authorized :show="false">
  <div>lalal</div>
</Authorized>

<template>
  <div class="a-menu">
    <slot v-if="show"></slot>
  </div>
</template>

<script>
export default {
  nmae: 'AMenu',
  props: {
    show: {
      type: Boolean
    }
  }
}
</script>

```



权限组件：

弊端：写法不方便，

在要渲染的组件外面，加一层条件渲染组件，如果 为 true ，渲染slot， false 返回为空

```html
 <Authorized :authority="['admin']">
  <SettingDrawer />
</Authorized>
```



权限按钮：

通过指令， v-auth

弊端：只有第一次的时候生效，但是后面不能改变

parentNode 是html 中的方法， removeChild  也是

```js
<a-icon
  v-auth="['admin']"
  class="trigger"
  :type="collapsed ? 'menu-unfold' : 'menu-fold'"
  @click="collapsed = !collapsed"
></a-icon>



import { check } from "../utils/auth";
function install(Vue, options = {}) {
  Vue.directive(options.name || "auth", {
    inserted(el, binding) {
      if (!check(binding.value)) {
        // parentNode ? 和 parent 有什么关系
        el.parentNode && el.parentNode.removeChild(el);
      }
    }
  });
}
export default { install };

Vue.use(Auth);
```



### 41-怎样在组件中运用ECharts、Antv等其他第三方库.mp4

如何去封装一个第三方库





### 42-如何高效地使用Mock数据进行开发

使用json 不太好区分，get\post\delete 等方式请求数据，用的是一个url，灵活性不太高

使用js的方式



第一种，使用代理，代理到后端接口

第二种，使用mockjs，在请求发送之前，拦截，返回json数据

第三种，使用bypass， 让请求返回的是本地服务器 require  进来的js文件，让他执行，返回数据



### 43-如何与服务端进行交互（Axios）

对 axios 进行封装，对错误的处理



在js文件 中是无法写单文件组件的，但是希望html代码能渲染出来，怎么做

使用render函数，还可以使用 jsx， 使用一个方法，返回 vnode



### 44-创建一个普通表单.mp4

antd 的表单设计和 iview 、element 有比较大的区别?  

表单的错误校验：

input组件 接受的参数：（必须的三个参数）

1. `validateStatus`: 校验状态，可选 ‘success’, ‘warning’, ‘error’, ‘validating’。
2. `help`：设置校验文案。
3. input 值

监听 watch input 值，返回 对应的status 和 help 文案

```vue
<a-form-item
 label="Field A"
 :label-col="formItemLayout.labelCol"
 :wrapper-col="formItemLayout.wrapperCol"
 validateStatus="filedAStatus"
 help="filedAHelp">
  <a-input v-model="filedA" placeholder="input placeholder"></a-input>
</a-form-item>

watch: {
	filedA(val) {
		if(val.length <= 5) {
        this.filedAStatus = "error";
				this.filedAHelp = "必须大于5个字符"
		}else {
        this.filedAStatus = "";
				this.filedAHelp = ""            
		}
	}
}
                      
handleSubmit() {
	if(this.filedA.length < 5) {
		// 和 watch 中逻辑一样的，验证重复
	}                      
}
```



### 45-初始数据、主动校验、动态赋值.mp4
### 46-创建一个分步表单.mp4
### 47-本人封装一个支撑主动校验的表单项.mp4
### 48-怎样办理系统中运用的图标.mp4

icon 不支持彩色

如何使用在线的方式使用icon-font?

我们通过icont-font 选完图标后，点击查看在线链接，生成线上的js地址

```js
const IconFont = Icon.createFromIconfontCN({
  scriptUrl: "//at.alicdn.com/t/font_1624744_jucv1dmnpp7.js" // generated by iconfont.cn
});

Vue.component("IconFont", IconFont);

```



### 49-怎样定制主题及动态切换主题.mp4
### 50-怎样做好国际化.mp4
### 51.怎样高效地构建打包发布.mp4
### 52.怎样构建可交互的组件文档.mp4
### 53.怎样做好组件的单元测试.mp4

全局安装 antd
如何全局安装
Vue.use做了哪些工作
Antd 有哪些常用组件




