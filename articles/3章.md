### 33.Ant Design Pro介绍

Ant Design Pro 是一个企业级中后台前端/设计解决方案。

从这里开始是用ant-design-vue组件写ant-design-vue-pro这个后台项目实现步骤的从零开始搭建的过程，[视频地址](https://time.geekbang.org/course/detail/163-89259?code=KHKYcoBU6vZa8nMglg7AWfDxxi3BWrz9INAzAY3umPk%3D)，它采用了ant-desgin-vue的组件库作为素材开发，进一步提炼了中后台管理系统的产品原型，可以帮助快速搭建后台页面。技术栈： [ES2015+](http://es6.ruanyifeng.com/)、[Vue.Js](https://cn.vuejs.org/v2/guide/index.html)、[Vuex](https://vuex.vuejs.org/zh/)、[Vue-Router](https://router.vuejs.org/zh/)、[g2](https://antv.alipay.com/zh-cn/g2/3.x/index.html) 和 [antd-vue](https://vue.ant.design/docs/vue/introduce-cn/)。



ant-design-vue 是类似于 element-ui 的前端组件框架，ant-design-pro 是提供中后台前端设计解决方案。

```
上下导航和左右导航的切换
主题颜色
整体风格设置
```

[预览](https://preview.pro.ant.design/dashboard/analysis)

### 34.运用Vue CLI 3快速创建项目.ts

1. 
   vue  -V   查看vue-cli版本

2. 
   vue create  ant-design-vue-pro

3. manually seletc features

   ```
   需要的
   babel、Router、Vuex、CSS Pre-processors、Linter/Formatter、Unit Testing
   
   不需要
   typescript、PWA、E2E Testing
   ```

4. 其他选择

   ```
   history-hash
   less  //ant-design-vue 本身是基于less
   ESlint with Prettier
   Lint on save & Lint and fix on commit   // 全选
   Jest
   In package.json
   ```

5. 安装 ant-design-vue 和 时间库 moment

```
 npm i ant-design-vue  moment 
```

 代码收录在，vue-learning1/mycode/ant-design-vue-app

6. 打tag

   ```js
   git tag -a 0.1.3 -m “Release version 0.1.3″
   
   git tag 是命令
   -a 0.1.3是增加 名为0.1.3的标签
   -m 后面跟着的是标签的注释
   
   git add .
   git commit -m “fixed some bugs”
   git tag -a 0.1.3 -m “Release version 0.1.3″
   
   –tags参数表示提交所有tag至服务器端，普通的git push origin master操作不会推送标签到服务器端。
   git push origin master
   git push origin --tags
   
   git tag --list  // 查看已有tag列表
   git checkout [tag/branch/commit]  // 切换到指定tag/branch/commit都是此命令
   
   删除标签的命令
   git tag -d 0.1.3
   
   删除远端服务器的标签
   git push origin :refs/tags/0.1.3
   ```

```
git tag -a  0.0.1 -m "34节结束"
git checkout 0.0.1
```



###  35-怎样自定义Webpack和Babel配置.mp4	

全局引入

```
import Antd from 'ant-design-vue'
import "ant-design-vue/dist/antd.less"

Vue.use(Antd)
```

按需引入

```js
import { Button} from 'ant-design-vue/lib/button'
import "ant-design-vue/lib/button/style"
Vue.use(Button)
```

安装插件：

```
使用 babel-plugin-import（推荐）。
npm i --save-dev babel-plugin-import


// .babelrc or babel-loader option
{
  "plugins": [
    ["import", { "libraryName": "ant-design-vue", "libraryDirectory": "es", "style": "css" }] // `style: true` 会加载 less 文件
  ]
}
```

安装插件后，如何按需引入

```js
import { DatePicker } from 'ant-design-vue';
Vue.use(DatePicker);

//不用单独引入从lib中引入组件和样式
```



### 36-怎样设计一个高扩展性的路由.mp4

没看懂？

```js
component: {render: h => h(router-view) }
```



### 37-完成一个可动态改动的页面规划.mp4

layout 组件

导航模式，在左侧，在右侧

整体风格定制，黑色，白色



BasicLayout 布局

```js
<Header/>
<SiderMenu/>
<router-view></router-view>
<Footer/>
```

a-layout  使用 

[使用的是第四种布局](https://www.antdv.com/components/layout-cn/)

```vue
<a-layout style="min-height: 100vh">
  <a-layout-sider>
  </a-layout-sider>

  <a-layout>
    <a-layout-header style="background: #fff; padding: 0">
      <Header />
    </a-layout-header>

    <a-layout-content style="margin: 0 16px">
      <router-view></router-view>
    </a-layout-content>

    <a-layout-footer style="text-align: center">
      <Footer />
    </a-layout-footer>

  </a-layout>
</a-layout>
```

抽屉 draw组件的使用

右侧的，整体风格定制页面

原理：点击的时候，给query后面追加，风格参数

```
this.$router.push({ query: { ...this.$route.query, [type]: value } });

左侧
黑色
http://localhost:8081/dashboard/analysis?navLayout=left&navTheme=dark
```

在 BasicLayout 页面

1. 从query中拿到风格参数
2. 绑定到class上面

```
navTheme() {
      return this.$route.query.navTheme || "dark";
    },
navLayout() {
    return this.$route.query.navLayout || "left";
}

 <div class="[`nav-theme-${navTheme}`, `nav-layout-${navLayout}`]">
```



###  38-怎样将菜单和路由分离.mp4

什么意思

```vue
<a-menu
      :selectedKeys="selectedKeys"
      :openKeys.sync="openKeys"
      mode="inline"
      :theme="theme"
    >
  
  
  
selectedKeys: this.selectedKeysMap[this.$route.path],
openKeys: this.collapsed ? [] : this.openKeysMap[this.$route.path]
```

首先需要了解 a-menu组件

```
openKeys 初始展开的 SubMenu 菜单项 key 数组  
selectedKeys 初始选中的菜单项 key 数组
```

用简单的话看

前者，被选中的menu-item 的父亲

后者，自己，被选中的自己



没搞懂：

parent 是干嘛的。

本身没有 click 事件，实际是交给父元素处理

```vue
<a-menu-item
        v-if="!item.children"
        :key="item.path"
        @click="
          () =>
            parent.$router.push({ path: item.path, query: parent.$route.query })
        "
      >
```



siderMenu 如何和数据联系起来？



hideInMenu， 不显示该路由

约定：有name，才渲染到菜单上

meta

分别是干嘛的，为啥要通过name的有无去控制是否添加菜单？



getMenuData 如何根据路由信息，生成左侧菜单

这两个操作是一样的。

```js
let a = {name: 1, age: 2}
let b = {...a}
let c = Object.assign(a)

// 浅复制，之前的a 改变，bc 也会改变
let a = {person: {name: 2, age: 1, add: { pro: 'anhui'}}}
let b = {...a}
let c = Object.assign(a)
```

第一版的getMenuData 我怎么没看懂

```js
getMenuData(routes) {
      cons menuData = [];
      routes.forEach(item => {
        if(item.name && !item.hideInMenu) {
          const newItem = {...item};
          delete = newItem.children;
          if(item.collapsed && !item.hideChildrenInMenu) {
            newItem.children = this.getMenuData(item.children)
          }
          menuData.push(newItem)
        }else if(
          !item.hideInMenu &&
          !item.hideChildrenInMenu &&
          item.children
          ) {
            menuData.push(...this.getMenuData(item.children))
        }
      })
      return menuData
    }

```







### 39-怎样运用路由办理用户权限.mp4



两种方法，一种是通过在 router 中添加meta信息，authority，是一个数组，代表当前路径可见的角色有哪些



lodash， findeLast 方法

npprogress , 顶部进入页面的进度条







### 40-愈加精密化的权限设计（权限组件、权限指令）.mp4



页面上的button 权限控制

某个组件的权限控制

```js
render(h, context) {
  const { props, scopedSlots } = context;
  // 如果校验通过，返回插槽，传递过来的子组件，
  return check(props.authority) ? scopedSlots.default() : null;
}

// 全局注册校验组件
Vue.component("Authorized", Authorized);
```



权限组件：

弊端：写法不方便，

在要渲染的组件外面，加一层条件渲染组件，如果 为 true ，渲染slot， false 返回为空

```html
 <Authorized :authority="['admin']">
  <SettingDrawer />
</Authorized>
```



权限按钮：

通过指令， v-auth

弊端：只有第一次的时候生效，但是后面不能改变

```js
<a-icon
  v-auth="['admin']"
  class="trigger"
  :type="collapsed ? 'menu-unfold' : 'menu-fold'"
  @click="collapsed = !collapsed"
></a-icon>
```



### 41-怎样在组件中运用ECharts、Antv等其他第三方库.mp4

如何去封装一个第三方库





### 42-如何高效地使用Mock数据进行开发

使用json 不太好区分，get\post\delete 等方式请求数据，用的是一个url，灵活性不太高

使用js的方式



第一种，使用代理，代理到后端接口

第二种，使用mockjs，在请求发送之前，拦截，返回json数据

第三种，使用bypass， 让请求返回的是本地服务器 require  进来的js文件，让他执行，返回数据



### 43-如何与服务端进行交互（Axios）

对 axios 进行封装，对错误的处理



在js文件 中是无法写单文件组件的，但是希望html代码能渲染出来，怎么做

使用render函数，还可以使用 jsx， 使用一个方法，返回 vnode



### 44-创建一个普通表单.mp4
### 45-初始数据、主动校验、动态赋值.mp4
### 46-创建一个分步表单.mp4
### 47-本人封装一个支撑主动校验的表单项.mp4
### 48-怎样办理系统中运用的图标.mp4
### 49-怎样定制主题及动态切换主题.mp4
### 50-怎样做好国际化.mp4
### 51.怎样高效地构建打包发布.mp4
### 52.怎样构建可交互的组件文档.mp4
### 53.怎样做好组件的单元测试.mp4

全局安装 antd
如何全局安装
Vue.use做了哪些工作
Antd 有哪些常用组件




